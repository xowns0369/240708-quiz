import streamlit as st

st.set_page_config(page_title="상식 수도 퀴즈", layout="centered")

st.title("🌍 기초 상식 수도 퀴즈")
st.write("총 30문제의 수도 퀴즈입니다. 각 문항의 정답을 골라주세요!")

# 퀴즈 데이터
quiz_data = [
    ("태준이는 잘생겼다?", ["잘생김", "잘생김", "잘생김", "잘생김"], "잘생김"),
    ("일본의 수도는 어디일까요?", ["오사카", "도쿄", "후쿠오카", "삿포로"], "도쿄"),
    ("중국의 수도는 어디일까요?", ["상하이", "홍콩", "베이징", "시안"], "베이징"),
    ("미국의 수도는 어디일까요?", ["뉴욕", "워싱턴 D.C.", "시카고", "로스앤젤레스"], "워싱턴 D.C."),
    ("프랑스의 수도는 어디일까요?", ["마르세유", "리옹", "파리", "니스"], "파리"),
    ("영국의 수도는 어디일까요?", ["맨체스터", "리버풀", "에든버러", "런던"], "런던"),
    ("이탈리아의 수도는 어디일까요?", ["밀라노", "로마", "나폴리", "베네치아"], "로마"),
    ("독일의 수도는 어디일까요?", ["뮌헨", "프랑크푸르트", "베를린", "함부르크"], "베를린"),
    ("캐나다의 수도는 어디일까요?", ["밴쿠버", "토론토", "오타와", "몬트리올"], "오타와"),
    ("러시아의 수도는 어디일까요?", ["상트페테르부르크", "모스크바", "노보시비르스크", "카잔"], "모스크바"),
    ("브라질의 수도는 어디일까요?", ["리우데자네이루", "상파울루", "브라질리아", "포르투알레그리"], "브라질리아"),
    ("호주의 수도는 어디일까요?", ["시드니", "멜버른", "캔버라", "브리즈번"], "캔버라"),
    ("이집트의 수도는 어디일까요?", ["카이로", "알렉산드리아", "룩소르", "기즈"], "카이로"),
    ("인도의 수도는 어디일까요?", ["뭄바이", "뉴델리", "콜카타", "첸나이"], "뉴델리"),
    ("태국의 수도는 어디일까요?", ["푸껫", "치앙마이", "방콕", "파타야"], "방콕"),
    ("터키의 수도는 어디일까요?", ["이스탄불", "앙카라", "이즈미르", "안탈리아"], "앙카라"),
    ("스페인의 수도는 어디일까요?", ["바르셀로나", "세비야", "마드리드", "발렌시아"], "마드리드"),
    ("베트남의 수도는 어디일까요?", ["하노이", "호찌민", "다낭", "후에"], "하노이"),
    ("멕시코의 수도는 어디일까요?", ["칸쿤", "과달라하라", "멕시코시티", "몬테레이"], "멕시코시티"),
    ("뉴질랜드의 수도는 어디일까요?", ["오클랜드", "크라이스트처치", "웰링턴", "해밀턴"], "웰링턴"),
    ("사우디아라비아의 수도는 어디일까요?", ["제다", "메카", "리야드", "담맘"], "리야드"),
    ("남아프리카공화국의 행정 수도는 어디일까요?", ["케이프타운", "요하네스버그", "프리토리아", "더반"], "프리토리아"),
    ("스웨덴의 수도는 어디일까요?", ["스톡홀름", "예테보리", "말뫼", "웁살라"], "스톡홀름"),
    ("핀란드의 수도는 어디일까요?", ["헬싱키", "탐페레", "투르쿠", "오울루"], "헬싱키"),
    ("노르웨이의 수도는 어디일까요?", ["오슬로", "베르겐", "스타방에르", "트론헤임"], "오슬로"),
    ("그리스의 수도는 어디일까요?", ["아테네", "테살로니키", "크레타", "로도스"], "아테네"),
    ("헝가리의 수도는 어디일까요?", ["부다페스트", "데브레첸", "미슈콜츠", "세게드"], "부다페스트"),
    ("체코의 수도는 어디일까요?", ["프라하", "브르노", "플젠", "올로모우츠"], "프라하"),
    ("아르헨티나의 수도는 어디일까요?", ["로사리오", "코르도바", "부에노스아이레스", "멘도사"], "부에노스아이레스"),
    ("이라크의 수도는 어디일까요?", ["바스라", "모술", "바그다드", "나자프"], "바그다드"),
]

# 사용자 답변 저장
user_answers = []

with st.form("quiz_form"):
    for idx, (question, options, correct) in enumerate(quiz_data, start=1):
        answer = st.radio(f"{idx}. {question}", options, key=idx)
        user_answers.append(answer)

    submitted = st.form_submit_button("제출하기")

if submitted:
    score = 0
    results = []
    for i, (_, _, correct_answer) in enumerate(quiz_data):
        if user_answers[i] == correct_answer:
            score += 1
            results.append(f"✅ {i+1}번 정답")
        else:
            results.append(f"❌ {i+1}번 오답 (정답: {correct_answer})")
def get_percentile(score):
    if score == 30:
        return "상위 90% 이상"
    elif 26 <= score <= 29:
        return "상위 80%"
    elif 21 <= score <= 25:
        return "상위 70%"
    elif 11 <= score <= 20:
        return "상위 60%"
    else:  # 0~10
        return "상위 40%"

    st.subheader("🎉 결과")
    st.success(f"총 {score} / 30문제 정답을 맞혔습니다!")
    st.info(f"📊 당신은 {percentile} 수준입니다!")
    with st.expander("📋 자세한 정답 확인하기"):
        for r in results:
            st.write(r)
